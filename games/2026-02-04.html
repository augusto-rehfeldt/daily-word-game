<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Consonant Canvas â€” Daily Word</title>
<style>
  :root{
    --bg:#0f1221;
    --panel:#171a2e;
    --ink:#e9ecff;
    --muted:#a8b0d6;
    --accent:#7ec8ff;
    --accent-2:#7bffa9;
    --warn:#ffb871;
    --bad:#ff6e6e;
    --good:#30d07b;
    --gap:#2a2f4d;
    --btn:#222648;
    --btn-hover:#2b3060;
    --btn-active:#353a74;
    --focus:#99e2ff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,sans-serif;
    color:var(--ink);
    background:linear-gradient(180deg,#0f1221 0%, #121633 100%);
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .wrap{
    width:100%;
    max-width:880px;
    padding:16px;
  }
  .card{
    background:var(--panel);
    border:1px solid #222548;
    border-radius:14px;
    padding:16px;
    display:flex;
    flex-direction:column;
    gap:14px;
    max-height:calc(100vh - 32px);
  }
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }
  .title{
    display:flex;
    align-items:baseline;
    gap:10px;
  }
  h1{
    margin:0;
    font-size:1.25rem;
    letter-spacing:0.3px;
  }
  .sub{
    color:var(--muted);
    font-size:0.9rem;
  }
  .rules{
    background:#121533;
    border:1px solid #242853;
    border-radius:10px;
    padding:10px 12px;
    color:var(--muted);
    font-size:0.92rem;
    line-height:1.35;
  }
  .puzzle{
    display:grid;
    grid-template-columns:1fr;
    gap:10px;
    background:#13183a;
    border:1px solid #242853;
    border-radius:12px;
    padding:12px;
  }
  .skeleton{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    flex-wrap:wrap;
    font-variant-numeric:tabular-nums;
  }
  .skeleton .label{
    color:var(--muted);
    font-size:0.9rem;
    margin-right:8px;
  }
  .sk-letters{
    display:flex;
    align-items:center;
    gap:8px;
    padding:6px 10px;
    background:#0f1330;
    border:1px solid #252a58;
    border-radius:999px;
    font-weight:700;
    letter-spacing:2px;
  }
  .sk-letters span{
    padding:4px 8px;
    background:#1b2052;
    border:1px solid #2c3478;
    border-radius:8px;
    min-width:28px;
    text-align:center;
  }
  .clue{
    text-align:center;
    color:var(--accent);
    font-size:1rem;
  }
  .hint-line{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    flex-wrap:wrap;
    color:var(--muted);
    font-size:0.92rem;
  }
  .hint-pill{
    padding:4px 8px;
    background:#0f1435;
    border:1px solid #2a2f5e;
    border-radius:999px;
  }
  .inputs{
    display:grid;
    grid-template-columns:1fr auto;
    gap:8px;
  }
  input[type=text]{
    width:100%;
    padding:12px 12px;
    font-size:1.05rem;
    background:#0f1435;
    border:1px solid #2a2f5e;
    color:var(--ink);
    border-radius:10px;
    outline:none;
  }
  input[type=text]:focus{
    border-color:var(--focus);
    box-shadow:0 0 0 3px #99e2ff22;
  }
  .btn{
    background:var(--btn);
    color:var(--ink);
    border:1px solid #3a3f76;
    border-radius:10px;
    padding:10px 14px;
    font-weight:600;
    cursor:pointer;
    transition:transform .02s ease, background .12s ease;
    min-height:44px;
  }
  .btn:hover{background:var(--btn-hover)}
  .btn:active{transform:translateY(1px); background:var(--btn-active)}
  .btn.secondary{
    background:#10143a;
    border-color:#2a2f5e;
    color:var(--muted);
  }
  .toolbar{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:8px;
  }
  .tool-wide{
    grid-column:span 2;
  }
  .tool-enter{
    grid-column:span 3;
  }
  .attempts{
    display:flex;
    flex-direction:column;
    gap:8px;
    overflow:auto;
    padding-right:2px;
    min-height:80px;
    max-height:260px;
  }
  .row{
    display:grid;
    grid-template-columns:1fr auto;
    gap:10px;
    align-items:center;
    background:#0f1330;
    border:1px solid #252a58;
    border-radius:10px;
    padding:8px 10px;
  }
  .guess{
    font-weight:700;
    letter-spacing:1px;
  }
  .meta{
    display:flex;
    gap:6px;
    flex-wrap:wrap;
  }
  .chip{
    font-size:0.75rem;
    padding:2px 6px;
    border-radius:999px;
    border:1px solid #2a2f5e;
    color:var(--muted);
    background:#121744;
  }
  .chip.good{
    border-color:#2f7251;
    color:#b9ffd8;
    background:#0d2a1c;
  }
  .gaps{
    display:flex;
    align-items:center;
    gap:6px;
    flex-wrap:wrap;
  }
  .gapbox{
    min-width:34px;
    padding:4px 6px;
    border-radius:8px;
    text-align:center;
    font-weight:700;
    font-variant-numeric:tabular-nums;
    border:1px solid #2a2f5e;
    background:var(--gap);
    color:var(--ink);
  }
  .gapbox.ok{
    background:#0e2a1b;
    border-color:#2f7251;
    color:#b9ffd8;
  }
  .gapbox.high{
    background:#2a1d0e;
    border-color:#6a4b14;
    color:#ffd9a8;
  }
  .gapbox.low{
    background:#2a0e0e;
    border-color:#7a2f2f;
    color:#ffc5c5;
  }
  .status{
    min-height:22px;
    font-size:0.9rem;
    color:var(--muted);
  }
  .status.err{color:var(--bad)}
  .banner{
    padding:10px 12px;
    border-radius:10px;
    border:1px solid #2f7251;
    background:#0d2a1c;
    color:#b9ffd8;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
  }
  .footer{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:8px;
    flex-wrap:wrap;
  }
  .help small{color:var(--muted)}
  .kbd{
    font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
    font-size:0.9em;
    background:#0d1233;
    border:1px solid #2a2f5e;
    border-radius:6px;
    padding:1px 6px;
    color:#cfe1ff;
  }
  @media (min-width:720px){
    .puzzle{
      grid-template-columns: 1.1fr 1fr;
      align-items:center;
    }
    .skeleton{justify-content:flex-start}
    .clue{text-align:left}
    .inputs{grid-template-columns: 1fr auto}
  }
  @media (max-height:700px){
    .rules{display:none}
    .attempts{max-height:200px}
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card" role="application" aria-label="Consonant Canvas daily word game">
    <header>
      <div class="title">
        <h1>Consonant Canvas</h1>
        <span class="sub" id="dayTag"></span>
      </div>
      <button class="btn secondary" id="hintBtn" aria-label="Reveal a hint">Hint</button>
    </header>

    <div class="rules" aria-live="polite">
      Rules: The consonants of today's word are fixed. Insert only the vowels A, E, I, O, U anywhere to form the word that matches the clue. The consonant order must stay the same; no extra consonants allowed. Submit guesses to see how many vowels belong in each gap.
    </div>

    <div class="puzzle">
      <div class="skeleton" aria-label="Fixed consonant skeleton">
        <span class="label">Skeleton:</span>
        <div class="sk-letters" id="skLetters" aria-hidden="true"></div>
      </div>
      <div class="clue" id="clue" aria-label="Clue text"></div>
      <div class="hint-line" id="hintLine"></div>
      <div class="inputs">
        <input type="text" id="guessInput" autocomplete="off" autocapitalize="none" spellcheck="false" placeholder="Type your word (vowels + the given consonants)">
        <button class="btn" id="submitBtn" aria-label="Submit guess">Submit</button>
      </div>
      <div class="toolbar" aria-label="On-screen input">
        <button class="btn" data-key="A">A</button>
        <button class="btn" data-key="E">E</button>
        <button class="btn" data-key="I">I</button>
        <button class="btn" data-key="O">O</button>
        <button class="btn" data-key="U">U</button>
        <button class="btn tool-wide secondary" id="bksp">Backspace</button>
        <button class="btn tool-wide secondary" id="clear">Clear</button>
        <button class="btn tool-enter" id="enter">Enter</button>
      </div>
    </div>

    <div class="status" id="status" aria-live="polite"></div>

    <div class="attempts" id="attempts" aria-label="Attempts and feedback"></div>

    <div class="footer">
      <div class="help">
        <small>Tip: The gap boxes show how many vowels belong before, between, and after the consonants. Green = exact. Brown = too many. Red = too few.</small>
      </div>
      <div>
        <button class="btn secondary" id="shareBtn" disabled>Share</button>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const vowels = new Set(['A','E','I','O','U']);
  const DATA = [
    {w:"befriend",clue:"to make a friend of"},
    {w:"trainer",clue:"coach; person who teaches skills"},
    {w:"seashore",clue:"the beach"},
    {w:"folklore",clue:"traditional beliefs and tales"},
    {w:"waterfall",clue:"a cascade of water"},
    {w:"keyboard",clue:"computer typing device"},
    {w:"holiday",clue:"a day of celebration"},
    {w:"composer",clue:"one who writes music"},
    {w:"magnetic",clue:"having attraction like a magnet"},
    {w:"lantern",clue:"portable light"},
    {w:"triangle",clue:"three-sided shape"},
    {w:"airplane",clue:"aircraft"},
    {w:"library",clue:"place to borrow books"},
    {w:"chocolate",clue:"sweet made from cocoa"},
    {w:"bracelet",clue:"wrist ornament"},
    {w:"colorful",clue:"full of color"},
    {w:"whisper",clue:"speak very softly"},
    {w:"blanket",clue:"warm bed cover"},
    {w:"dinosaur",clue:"prehistoric reptile"},
    {w:"equation",clue:"a math statement of equality"},
    {w:"remember",clue:"to recall"},
    {w:"dessert",clue:"sweet course"},
    {w:"pocketful",clue:"as much as fits in a pocket"},
    {w:"notebook",clue:"book for notes"},
    {w:"gardener",clue:"person who tends plants"},
    {w:"celebrate",clue:"to honor with festivities"},
    {w:"overlook",clue:"to miss noticing"},
    {w:"fireplace",clue:"indoor hearth"},
    {w:"backbone",clue:"spine"},
    {w:"sunlight",clue:"light from the sun"},
    {w:"discovery",clue:"finding something new"},
    {w:"fragrant",clue:"having a pleasant smell"},
    {w:"midnight",clue:"12 o'clock at night"},
    {w:"umbrella",clue:"rain shield"},
    {w:"treasure",clue:"valuable collection"},
    {w:"painter",clue:"artist with brushes"},
    {w:"hospital",clue:"medical center"},
    {w:"miracle",clue:"amazing event"},
    {w:"printer",clue:"machine that prints"},
    {w:"seaside",clue:"coast"},
    {w:"avocado",clue:"green fruit with a pit"},
    {w:"calendar",clue:"monthly date grid"},
    {w:"hardware",clue:"tools and devices"},
    {w:"software",clue:"programs"},
    {w:"mountain",clue:"large natural elevation"},
    {w:"thunder",clue:"loud rumbling in a storm"},
    {w:"rainbow",clue:"multi-colored arc"},
    {w:"cushion",clue:"soft pad"},
    {w:"station",clue:"train stop"},
    {w:"battery",clue:"power cell"},
    {w:"factory",clue:"place where goods are made"},
    {w:"journal",clue:"daily record"},
    {w:"victory",clue:"win"},
    {w:"luggage",clue:"suitcases"},
    {w:"meadow",clue:"grassy field"},
    {w:"harvest",clue:"gathering crops"},
    {w:"capture",clue:"to seize"},
    {w:"kingdom",clue:"realm ruled by a king"},
    {w:"garlic",clue:"pungent bulb"},
    {w:"volcano",clue:"mountain that erupts"},
    {w:"crystal",clue:"clear mineral"},
    {w:"anchor",clue:"ship stopper"},
    {w:"reason",clue:"explanation"},
    {w:"pepper",clue:"spicy shaker content"},
    {w:"leopard",clue:"spotted big cat"},
    {w:"perfume",clue:"fragrance"},
    {w:"diamond",clue:"precious stone"},
    {w:"fortune",clue:"wealth or fate"},
    {w:"cabinet",clue:"storage cupboard"},
    {w:"courage",clue:"bravery"},
    {w:"melody",clue:"tune"},
    {w:"gravel",clue:"small stones"},
    {w:"cupboard",clue:"kitchen storage"},
    {w:"horizon",clue:"distant line of earth and sky"},
    {w:"cabbage",clue:"leafy vegetable"},
    {w:"dentist",clue:"tooth doctor"},
    {w:"teacher",clue:"educator"},
    {w:"history",clue:"study of the past"},
    {w:"galaxy",clue:"star system"},
    {w:"oatmeal",clue:"hot cereal"}
  ];

  function daysSince(yyyy,mm,dd){
    const base = Date.UTC(yyyy, mm-1, dd)/86400000;
    const today = Date.UTC(new Date().getUTCFullYear(), new Date().getUTCMonth(), new Date().getUTCDate())/86400000;
    return Math.floor(today - base);
  }

  const dayIndex = daysSince(2024,1,1);
  const daily = DATA[ ((dayIndex % DATA.length)+DATA.length) % DATA.length ];
  const dailyNumber = dayIndex + 1;

  function analyze(word){
    const up = word.toUpperCase();
    const sk = [];
    const gaps = [];
    let g = 0;
    for(let i=0;i<up.length;i++){
      const ch = up[i];
      if(vowels.has(ch)){
        g++;
      }else if(ch >= 'A' && ch <= 'Z'){
        gaps.push(g);
        g = 0;
        sk.push(ch);
      }
    }
    gaps.push(g); // trailing gap
    return {skeleton: sk.join(''), gaps, upper: up};
  }

  const target = daily.w;
  const clue = daily.clue;
  const tInfo = analyze(target);
  const skeleton = tInfo.skeleton;
  const tGaps = tInfo.gaps;
  const maxAttempts = 10;

  // UI refs
  const dayTag = document.getElementById('dayTag');
  const skLetters = document.getElementById('skLetters');
  const clueEl = document.getElementById('clue');
  const hintLine = document.getElementById('hintLine');
  const input = document.getElementById('guessInput');
  const submitBtn = document.getElementById('submitBtn');
  const attemptsEl = document.getElementById('attempts');
  const statusEl = document.getElementById('status');
  const hintBtn = document.getElementById('hintBtn');
  const shareBtn = document.getElementById('shareBtn');

  dayTag.textContent = `Daily #${dailyNumber}`;
  clueEl.textContent = `Clue: ${clue}`;

  // Render skeleton letters
  function renderSkeleton(){
    skLetters.innerHTML = '';
    skeleton.split('').forEach((c, idx)=>{
      const s = document.createElement('span');
      s.textContent = c;
      skLetters.appendChild(s);
      if(idx < skeleton.length - 1){
        // subtle dot between
      }
    });
    const hintPills = [];
    hintPills.push(`<span class="hint-pill">${skeleton.length} consonants â€¢ ${tGaps.length} gaps</span>`);
    hintPills.push(`<span class="hint-pill">Only A E I O U may be added</span>`);
    hintLine.innerHTML = hintPills.join(' ');
  }
  renderSkeleton();

  // Helpers
  function onlyLetters(s){return /^[a-zA-Z]+$/.test(s)}
  function consonantStrip(s){return s.toUpperCase().replace(/[AEIOU]/g,'').replace(/[^A-Z]/g,'')}
  function gapFeedback(guess){
    const info = analyze(guess);
    const gGaps = info.gaps;
    const boxes = [];
    for(let i=0;i<tGaps.length;i++){
      const g = gGaps[i] ?? 0;
      const t = tGaps[i] ?? 0;
      const div = document.createElement('div');
      div.className = 'gapbox';
      if(g === t){
        div.classList.add('ok');
        div.textContent = g;
        div.title = `Gap ${i+1}: ${g} âœ“`;
      }else if(g > t){
        div.classList.add('high');
        div.textContent = g + ' â†‘';
        div.title = `Gap ${i+1}: ${g} (too many)`;
      }else{
        div.classList.add('low');
        div.textContent = g + ' â†“';
        div.title = `Gap ${i+1}: ${g} (too few)`;
      }
      boxes.push(div);
    }
    return boxes;
  }

  function setStatus(msg, isErr=false){
    statusEl.textContent = msg || '';
    statusEl.className = 'status' + (isErr ? ' err':'');
  }

  const gameState = {
    attempts: [],
    solved:false,
    hinted:false
  };

  function renderAttemptRow(guess){
    const row = document.createElement('div');
    row.className = 'row';
    const left = document.createElement('div');
    left.className = 'guess';
    left.textContent = guess.toUpperCase();

    const right = document.createElement('div');
    right.style.display = 'flex';
    right.style.flexDirection = 'column';
    right.style.alignItems = 'flex-end';
    right.style.gap = '6px';

    const gaps = document.createElement('div');
    gaps.className = 'gaps';
    gapFeedback(guess).forEach(el => gaps.appendChild(el));

    const meta = document.createElement('div');
    meta.className = 'meta';
    const chip1 = document.createElement('span');
    chip1.className = 'chip good';
    chip1.textContent = 'Structure âœ“';
    meta.appendChild(chip1);

    const lenChip = document.createElement('span');
    lenChip.className = 'chip';
    const diff = guess.length - target.length;
    if(diff === 0){ lenChip.classList.add('good'); lenChip.textContent = 'Length âœ“'; }
    else if(diff > 0){ lenChip.textContent = `Too long by ${diff}`; }
    else { lenChip.textContent = `Too short by ${Math.abs(diff)}`; }
    meta.appendChild(lenChip);

    right.appendChild(gaps);
    right.appendChild(meta);

    row.appendChild(left);
    row.appendChild(right);
    attemptsEl.prepend(row);
  }

  function handleSubmit(){
    if(gameState.solved) return;
    const raw = input.value.trim();
    if(!raw){
      setStatus('Type a word first.');
      return;
    }
    if(!onlyLetters(raw)){
      setStatus('Letters only, please.');
      return;
    }
    const up = raw.toUpperCase();

    const sk = consonantStrip(up);
    if(sk !== skeleton){
      setStatus(`Your consonants must read ${skeleton}. Only insert vowels A, E, I, O, U.`, true);
      return;
    }
    // Valid structure; count as attempt
    setStatus('');
    gameState.attempts.push(up);

    renderAttemptRow(up);

    if(up === tInfo.upper){
      gameState.solved = true;
      onWin();
    }else{
      if(gameState.attempts.length >= maxAttempts){
        onLose();
      }else{
        const correctGaps = analyze(up).gaps.reduce((acc,g,i)=> acc + (g === tGaps[i] ? 1:0), 0);
        setStatus(`${correctGaps}/${tGaps.length} gaps correct. Keep going!`);
      }
    }

    input.select();
  }

  function onWin(){
    const banner = document.createElement('div');
    banner.className = 'banner';
    banner.innerHTML = `<div><strong>Nice!</strong> You solved it in ${gameState.attempts.length} ${gameState.attempts.length===1?'try':'tries'}.</div>
                        <div><button class="btn" id="shareNow">Share</button></div>`;
    statusEl.replaceWith(banner);
    // Wire share
    banner.querySelector('#shareNow').addEventListener('click', shareResult);
    shareBtn.disabled = false;
  }

  function onLose(){
    const banner = document.createElement('div');
    banner.className = 'banner';
    banner.style.borderColor = '#7a2f2f';
    banner.style.background = '#2a0e0e';
    banner.style.color = '#ffd0d0';
    banner.innerHTML = `<div><strong>Answer:</strong> ${tInfo.upper}</div>
                        <div><button class="btn" id="shareNow">Share</button></div>`;
    statusEl.replaceWith(banner);
    banner.querySelector('#shareNow').addEventListener('click', shareResult);
    shareBtn.disabled = false;
  }

  function shareResult(){
    const marks = gameState.attempts.map(a=>{
      const g = analyze(a).gaps;
      let s='';
      for(let i=0;i<tGaps.length;i++){
        if(g[i]===tGaps[i]) s+='ðŸŸ©';
        else if((g[i]??0) > tGaps[i]) s+='ðŸ”¼';
        else s+='ðŸ”½';
      }
      return s;
    }).join('\n');
    const head = `Consonant Canvas #${dailyNumber} ${gameState.solved ? gameState.attempts.length : 'X'}/${maxAttempts}\n`;
    const sk = `Skeleton: ${skeleton}\n`;
    const text = head + sk + marks;
    navigator.clipboard?.writeText(text).then(()=>{
      alert('Result copied to clipboard!');
    }).catch(()=>{
      // Fallback
      const ta = document.createElement('textarea');
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      try{document.execCommand('copy'); alert('Result copied to clipboard!');}catch(e){}
      ta.remove();
    });
  }

  // Wire inputs
  submitBtn.addEventListener('click', handleSubmit);
  document.getElementById('enter').addEventListener('click', handleSubmit);
  document.getElementById('bksp').addEventListener('click', ()=>{
    input.setRangeText('', input.selectionStart-1 ?? input.value.length-1, input.selectionEnd ?? input.value.length, 'end');
    input.focus();
  });
  document.getElementById('clear').addEventListener('click', ()=>{
    input.value = '';
    input.focus();
  });
  document.querySelectorAll('[data-key]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const key = btn.getAttribute('data-key');
      const start = input.selectionStart ?? input.value.length;
      const end = input.selectionEnd ?? input.value.length;
      input.setRangeText(key, start, end, 'end');
      input.focus();
    });
  });
  input.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){ e.preventDefault(); handleSubmit(); }
  });

  // Hint
  let hintUsed = false;
  hintBtn.addEventListener('click', ()=>{
    if(hintUsed) return;
    hintUsed = true;
    gameState.hinted = true;
    hintBtn.disabled = true;
    const first = tInfo.upper[0];
    const totalVowels = (tInfo.upper.match(/[AEIOU]/g)||[]).length;
    const pill = document.createElement('span');
    pill.className = 'hint-pill';
    pill.textContent = `First letter: ${first}`;
    const pill2 = document.createElement('span');
    pill2.className = 'hint-pill';
    pill2.textContent = `Total vowels: ${totalVowels}`;
    hintLine.appendChild(pill);
    hintLine.appendChild(pill2);
    setStatus('Hint revealed.');
  });

  // Prefill placeholder guidance showing consonants included
  input.placeholder = `Use vowels to fill: ${skeleton}`;

  // Accessibility: label day and clue
  document.title = `Consonant Canvas #${dailyNumber}`;

  // Touch target: ensure min height set via CSS
  // Initial state
  shareBtn.addEventListener('click', shareResult);

})();
</script>
</body>
</html>