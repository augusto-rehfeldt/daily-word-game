<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cutline — Today’s Daily Word Split</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root{
    --bg:#0e1116;
    --panel:#161b22;
    --ink:#e6edf3;
    --muted:#9aa4b2;
    --accent:#59b0ff;
    --ok:#35c27c;
    --warn:#ff6d6d;
    --cut:#ff5a60;
    --gap:#2a3342;
  }
  html,body{height:100%;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;margin:0}
  .wrap{max-width:980px;margin:0 auto;padding:18px 20px;box-sizing:border-box}
  header{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:10px}
  h1{font-size:22px;margin:0;letter-spacing:.3px}
  .sub{color:var(--muted);font-size:13px}
  .panel{background:var(--panel);border:1px solid #222a36;border-radius:10px;padding:14px 14px}
  .rules{font-size:13px;line-height:1.35;color:var(--muted)}
  .rules b{color:var(--ink)}
  .streambox{margin-top:12px}
  .stream{display:flex;align-items:center;justify-content:center;gap:0;background:#0f141b;border:1px solid #1f2633;border-radius:10px;padding:10px 10px;user-select:none;flex-wrap:wrap;row-gap:8px}
  .cell{width:28px;height:38px;display:flex;align-items:center;justify-content:center;border-radius:6px;background:linear-gradient(#15202b,#121923);border:1px solid #1f2734;font-weight:700;letter-spacing:0.5px}
  .gap{width:14px;height:44px;position:relative;cursor:pointer;border-radius:6px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
  .gap:hover{background:rgba(89,176,255,0.12)}
  .gap::after{content:"";width:2px;height:24px;background:var(--gap);border-radius:2px;transition:all .12s ease}
  .gap.cut::after{width:4px;height:30px;background:var(--cut);box-shadow:0 0 6px rgba(255,90,96,.45)}
  .gap.lock{cursor:not-allowed}
  .under{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap}
  .segments, .clues{flex:1;min-width:300px}
  .segments h3,.clues h3{font-size:13px;margin:0 0 8px 2px;color:var(--muted);font-weight:600;letter-spacing:.3px}
  .seglist{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
  .seg{background:#0f141b;border:1px solid #1f2633;border-radius:8px;min-height:42px;display:flex;align-items:center;justify-content:center;font-weight:700;letter-spacing:.4px}
  .seg.ok{border-color:#1f3b2c;background:linear-gradient(#102017,#0b1611);color:var(--ok)}
  .seg.wait{opacity:.9}
  .seg.empty{color:var(--muted);font-weight:600}
  .cluelist{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
  .clue{background:#0f141b;border:1px dashed #2a3342;border-radius:8px;padding:8px;min-height:42px;display:flex;flex-direction:column;gap:2px}
  .clue .num{font-size:11px;color:var(--muted)}
  .clue .txt{font-size:13px}
  .length{font-size:11px;color:var(--muted)}
  .bar{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:12px;flex-wrap:wrap}
  .btns{display:flex;gap:8px;flex-wrap:wrap}
  button{background:#152030;color:var(--ink);border:1px solid #263041;border-radius:8px;padding:8px 10px;font-weight:600;cursor:pointer;transition:.12s;font-size:13px}
  button:hover{border-color:#39506a;background:#18263a}
  button.primary{background:#1a2f47;border-color:#2c4a6b;color:#cde6ff}
  button.primary:hover{background:#1e3a58}
  .status{font-size:13px;color:var(--muted)}
  .status strong{color:var(--ink)}
  .win{display:none;margin-top:12px;padding:10px 12px;border:1px solid #1d3d2a;background:#0f1c14;border-radius:8px;color:var(--ok);font-weight:700}
  .win.show{display:block}
  .hinted .length{display:inline}
  .length{display:none}
  .tag{display:inline-block;background:#132034;border:1px solid #213149;color:#a9c7ec;border-radius:6px;padding:2px 6px;font-size:11px;margin-left:6px}
  footer{margin-top:14px;color:var(--muted);font-size:12px;display:flex;justify-content:space-between;align-items:center}
  .tiny{font-size:11px;color:#7f8a99}
  @media (max-width: 840px){
    .seglist,.cluelist{grid-template-columns:repeat(2,1fr)}
  }
  @media (max-width: 600px){
    .stream{padding:8px 4px}
    .cell{width:24px;height:34px;font-size:14px}
    .gap{width:10px;height:40px}
    .gap::after{height:18px}
    .gap.cut::after{height:24px}
    .under{flex-direction:column}
    .seglist,.cluelist{grid-template-columns:1fr}
    .btns{justify-content:center;width:100%}
    button{flex:1;min-width:120px}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>Cutline</h1>
      <div class="sub" id="dateLine"></div>
    </div>
    <div class="sub" id="puzzleId"></div>
  </header>

  <div class="panel rules">
    Split the letter stream into four words that match the clues (left to right).
    - Place exactly three cuts by clicking between letters. Click again to remove.
    - Use every letter in order; no rearranging.
    - When all four segments match, you win.
  </div>

  <div class="panel streambox">
    <div id="stream" class="stream" aria-label="Letter stream"></div>

    <div class="under">
      <div class="segments">
        <h3>Segments</h3>
        <div id="seglist" class="seglist"></div>
      </div>
      <div class="clues">
        <h3>Clues</h3>
        <div id="cluelist" class="cluelist"></div>
      </div>
    </div>

    <div class="bar">
      <div class="btns">
        <button id="checkBtn" class="primary">Check</button>
        <button id="resetBtn">Reset Cuts</button>
        <button id="hintBtn">Reveal Lengths</button>
        <button id="giveBtn">Give Up (Show Cuts)</button>
      </div>
      <div class="status" id="status">Place 3 cuts to make 4 words.</div>
    </div>
    <div id="win" class="win">Solved! Nicely sliced.</div>
  </div>

  <footer>
    <div class="tiny">Deterministic daily puzzle. No timers, no tricks.</div>
    <div class="tiny">Tip: Think of familiar pairings that can nest together.</div>
  </footer>
</div>

<script>
(function(){
  // Daily set (32 entries). Each puzzle is four words; stream is their concatenation.
  const PUZZLES = [
    {words:["tiny","house","plant","pots"], clues:[
      "very small","dwelling","living organism","containers"]},
    {words:["quick","brown","fox","jumps"], clues:[
      "rapid","color","cunning animal","leaps"]},
    {words:["paper","clip","chain","links"], clues:[
      "sheet","fastener","series","connections"]},
    {words:["moon","light","sugar","cubes"], clues:[
      "Earth's satellite","illumination","sweetener","blocks"]},
    {words:["north","wind","chill","factor"], clues:[
      "direction","breeze","coldness","component"]},
    {words:["green","thumb","garden","tools"], clues:[
      "color","digit","cultivated plot","implements"]},
    {words:["coffee","table","book","stack"], clues:[
      "beverage","furniture surface","volume","pile"]},
    {words:["river","bank","loan","office"], clues:[
      "flowing water","edge","borrowed money","workplace"]},
    {words:["silent","film","star","system"], clues:[
      "quiet","movie","celebrity","arrangement"]},
    {words:["wheel","chair","ramp","access"], clues:[
      "circular part","seat","incline","entry"]},
    {words:["night","train","track","switch"], clues:[
      "darkness","rail transport","path","change"]},
    {words:["sound","proof","room","test"], clues:[
      "noise","evidence","chamber","exam"]},
    {words:["water","fall","color","grade"], clues:[
      "liquid","drop","hue","rating"]},
    {words:["solar","power","grid","failure"], clues:[
      "sun-based","energy","network","breakdown"]},
    {words:["bread","crumb","trail","marker"], clues:[
      "loaf base","tiny bit","path","indicator"]},
    {words:["clock","work","shop","window"], clues:[
      "timepiece","labor","store","pane"]},
    {words:["train","station","master","key"], clues:[
      "rail vehicle","terminal","expert","opener"]},
    {words:["stone","cold","press","juice"], clues:[
      "rock","chilly","machine","drink"]},
    {words:["space","bar","code","reader"], clues:[
      "void","tavern","stripes & digits","device"]},
    {words:["shadow","box","office","hours"], clues:[
      "silhouette","container","ticket counter","times"]},
    {words:["finger","print","screen","time"], clues:[
      "digit","mark","display","duration"]},
    {words:["silver","lining","cloud","cover"], clues:[
      "precious metal","inner layer","sky puff","concealment"]},
    {words:["market","place","setting","sun"], clues:[
      "commerce","location","arrangement","evening star"]},
    {words:["under","ground","water","pipe"], clues:[
      "beneath","earth","liquid","tube"]},
    {words:["heavy","metal","band","leader"], clues:[
      "weighty","element","group","chief"]},
    {words:["broken","heart","break","dance"], clues:[
      "damaged","organ","pause","street style"]},
    {words:["double","blind","taste","test"], clues:[
      "twofold","sightless","flavor","trial"]},
    {words:["mirror","ball","room","service"], clues:[
      "reflector","sphere","chamber","assistance"]},
    {words:["open","secret","hand","shake"], clues:[
      "not shut","mystery","body part","greeting"]},
    {words:["storm","front","page","number"], clues:[
      "tempest","leading edge","newspaper leaf","numeral"]},
    {words:["cheap","trick","shot","glass"], clues:[
      "low-cost","ruse","attempt","vessel"]},
    {words:["garden","path","story","twist"], clues:[
      "yard plot","walkway","tale","turn"]}
  ];

  // Deterministic daily selection (UTC days since 2024-01-01)
  function dayIndexUTC(){
    const now = new Date();
    const todayUTC = Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate());
    const epochUTC = Date.UTC(2024,0,1);
    return Math.floor((todayUTC - epochUTC) / 86400000);
  }
  const dayIndex = dayIndexUTC();
  const puzzleIndex = ((dayIndex % PUZZLES.length)+PUZZLES.length)%PUZZLES.length;
  const puzzleNum = dayIndex + 1; // overall counting
  const puzzle = PUZZLES[puzzleIndex];
  const WORDS = puzzle.words.slice();
  const STREAM = WORDS.join("").toUpperCase();
  const TARGET = WORDS.map(w=>w.toUpperCase());

  // Elements
  const streamEl = document.getElementById('stream');
  const seglistEl = document.getElementById('seglist');
  const cluelistEl = document.getElementById('cluelist');
  const statusEl = document.getElementById('status');
  const checkBtn = document.getElementById('checkBtn');
  const resetBtn = document.getElementById('resetBtn');
  const hintBtn = document.getElementById('hintBtn');
  const giveBtn = document.getElementById('giveBtn');
  const winEl = document.getElementById('win');
  const dateLine = document.getElementById('dateLine');
  const puzzleId = document.getElementById('puzzleId');

  // Header info
  const now = new Date();
  dateLine.textContent = now.toLocaleDateString(undefined,{weekday:'short',year:'numeric',month:'short',day:'numeric'});
  puzzleId.textContent = `Daily #${puzzleNum}  •  Set ${puzzleIndex+1}/${PUZZLES.length}`;

  // Build clue cards
  function renderClues(showLengths){
    cluelistEl.innerHTML = "";
    puzzle.clues.forEach((txt,i)=>{
      const d = document.createElement('div');
      d.className = 'clue';
      const n = document.createElement('div'); n.className = 'num'; n.textContent = `Clue ${i+1}`;
      const t = document.createElement('div'); t.className = 'txt'; t.textContent = txt;
      const len = document.createElement('div'); len.className = 'length'; len.textContent = `(${WORDS[i].length})`;
      if(showLengths) len.style.display = 'inline';
      t.appendChild(len);
      d.appendChild(n); d.appendChild(t);
      cluelistEl.appendChild(d);
    });
    if(showLengths) cluelistEl.parentElement.parentElement.classList.add('hinted');
  }

  // Build stream cells and gaps
  const cuts = new Set(); // cut after index i (0..n-2)
  function buildStream(){
    streamEl.innerHTML = "";
    for(let i=0;i<STREAM.length;i++){
      const c = document.createElement('div');
      c.className = 'cell';
      c.textContent = STREAM[i];
      streamEl.appendChild(c);
      if(i<STREAM.length-1){
        const g = document.createElement('div');
        g.className = 'gap';
        g.setAttribute('role','button');
        g.setAttribute('aria-label','Toggle cut');
        g.dataset.idx = i.toString();
        if(cuts.has(i)) g.classList.add('cut');
        g.addEventListener('click', onGapClick);
        streamEl.appendChild(g);
      }
    }
  }

  function onGapClick(e){
    const idx = parseInt(e.currentTarget.dataset.idx,10);
    if(cuts.has(idx)){
      cuts.delete(idx);
      e.currentTarget.classList.remove('cut');
      e.currentTarget.classList.remove('lock');
      setStatus(`Cut removed (${cuts.size}/3).`);
    }else{
      if(cuts.size>=3){
        // brief lock flash
        e.currentTarget.classList.add('lock');
        setStatus("Only 3 cuts allowed.");
        setTimeout(()=>e.currentTarget.classList.remove('lock'),180);
        return;
      }
      cuts.add(idx);
      e.currentTarget.classList.add('cut');
      setStatus(`Cut placed (${cuts.size}/3).`);
    }
    renderSegments();
    checkWin(false);
  }

  function currentSegments(){
    const n = STREAM.length;
    const sorted = Array.from(cuts).sort((a,b)=>a-b);
    const bounds = [0, ...sorted.map(x=>x+1), n];
    const segs = [];
    for(let i=0;i<bounds.length-1;i++){
      const s = STREAM.slice(bounds[i], bounds[i+1]);
      if(s.length) segs.push(s);
    }
    return segs;
  }

  function renderSegments(){
    const segs = currentSegments();
    seglistEl.innerHTML = "";
    for(let i=0;i<4;i++){
      const div = document.createElement('div');
      div.className = 'seg';
      const s = segs[i]||"";
      if(!s){
        div.classList.add('empty');
        div.textContent = '…';
      }else{
        div.textContent = s;
        if(TARGET[i]===s){
          div.classList.add('ok');
        }else{
          div.classList.add('wait');
        }
      }
      seglistEl.appendChild(div);
    }
  }

  function setStatus(msg){
    statusEl.innerHTML = msg;
  }

  function checkWin(fromButton){
    const segs = currentSegments();
    let ok = segs.length===4 && segs.every((s,i)=>s===TARGET[i]);
    if(ok){
      winEl.classList.add('show');
      setStatus(`<strong>Win!</strong> ${WORDS.map(w=>w.toUpperCase()).join(" • ")}`);
      // freeze interactions
      document.querySelectorAll('.gap').forEach(g=>g.style.pointerEvents='none');
      return true;
    }else{
      if(fromButton){
        if(segs.length<4){
          setStatus(`Not yet. You need ${4-segs.length} more segment${4-segs.length===1?"":"s"}.`);
        }else{
          let count = 0;
          for(let i=0;i<4;i++) if(segs[i]===TARGET[i]) count++;
          setStatus(`Keep slicing: ${count}/4 segments correct.`);
        }
      }
      return false;
    }
  }

  // Buttons
  checkBtn.addEventListener('click', ()=>{ renderSegments(); checkWin(true); });
  resetBtn.addEventListener('click', ()=>{
    cuts.clear();
    buildStream();
    renderSegments();
    winEl.classList.remove('show');
    setStatus("Cuts cleared. Place 3 cuts to make 4 words.");
  });
  let hinted = false;
  hintBtn.addEventListener('click', ()=>{
    hinted = true;
    renderClues(true);
    setStatus("Lengths revealed.");
  });
  giveBtn.addEventListener('click', ()=>{
    // Place cuts at the true boundaries
    cuts.clear();
    let pos = 0;
    for(let i=0;i<WORDS.length-1;i++){
      pos += WORDS[i].length - 1; // index after which to cut
      cuts.add(pos);
      pos += 1; // move to next start
    }
    // Recompute: simpler method: rebuild by adding cumulative.
    cuts.clear();
    let acc = 0;
    for(let i=0;i<WORDS.length-1;i++){
      acc += WORDS[i].length;
      cuts.add(acc-1);
    }
    buildStream();
    renderSegments();
    checkWin(false);
    setStatus("Solution shown.");
  });

  // Initial render
  renderClues(false);
  buildStream();
  renderSegments();
})();
</script>
</body>
</html>