<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GaugeWord — Daily</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root{
    --bg:#0f1320;
    --panel:#171d2e;
    --ink:#e9eef6;
    --muted:#9fb0c8;
    --accent:#5dd0ff;
    --good:#5de094;
    --warn:#ffd166;
    --bad:#ff6b6b;
    --chip:#22283a;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,sans-serif}
  .wrap{
    max-width:1100px;
    margin:0 auto;
    padding:16px 18px;
    display:flex;
    flex-direction:column;
    gap:12px;
    height:100vh;
  }
  header{
    display:flex;align-items:center;justify-content:space-between;
    padding:10px 14px;border-radius:10px;background:var(--panel);
  }
  .title{
    display:flex;align-items:baseline;gap:10px;
  }
  h1{font-size:22px;margin:0;letter-spacing:.5px}
  .day{
    font-size:13px;color:var(--muted);padding:2px 8px;border-radius:999px;background:var(--chip)}
  .legend{
    display:flex;gap:14px;align-items:center;
    font-size:13px;color:var(--muted)
  }
  .legend b{color:var(--ink);font-weight:600}
  .legend .pill{display:inline-flex;align-items:center;gap:6px;background:var(--chip);padding:6px 8px;border-radius:8px}
  .legend .arrow{font-weight:700}
  main{
    display:grid;grid-template-columns:1.2fr .8fr;gap:12px;min-height:0; /* allow inner scroll */
  }
  .panel{background:var(--panel);border-radius:10px;padding:12px;display:flex;flex-direction:column;gap:10px;min-height:0}
  .rules ul{margin:6px 0 0 18px;padding:0}
  .rules li{margin:6px 0;color:var(--muted);font-size:14px}
  .metrics-head{
    display:flex;align-items:center;gap:8px;font-size:12px;color:var(--muted)
  }
  .metrics-head .badge{padding:3px 8px;border-radius:6px;background:var(--chip);color:var(--ink);font-weight:600}
  .inputRow{
    display:flex;gap:8px;align-items:center
  }
  input[type=text]{
    flex:1;border:1px solid transparent;background:var(--chip);color:var(--ink);
    padding:10px 12px;border-radius:8px;font-size:16px;outline:none;
  }
  input[type=text]::placeholder{color:#7c8aa5}
  button{
    background:var(--accent);color:#001018;border:none;border-radius:8px;
    padding:10px 12px;font-weight:700;font-size:14px;cursor:pointer;
  }
  button.secondary{
    background:transparent;border:1px solid #2a3248;color:var(--muted)
  }
  button:disabled{opacity:.5;cursor:not-allowed}
  .msg{min-height:20px;font-size:13px;color:var(--muted)}
  .board{
    background:rgba(255,255,255,0.02);
    border:1px solid #20263a;border-radius:8px;overflow:auto;min-height:0;flex:1
  }
  table{width:100%;border-collapse:collapse;font-variant-numeric:tabular-nums}
  thead th{
    position:sticky;top:0;background:#1a2135;border-bottom:1px solid #2a3248;
    font-size:12px;color:var(--muted);padding:8px 6px
  }
  tbody td{padding:8px 6px;border-bottom:1px dashed #212840;font-size:15px}
  tbody tr:last-child td{border-bottom:none}
  .guess{font-weight:800;letter-spacing:.6px}
  .cell{
    display:flex;align-items:center;justify-content:center;gap:6px
  }
  .val{font-weight:700}
  .arrow{width:22px;text-align:center;font-weight:900}
  .up{color:var(--warn)}
  .down{color:var(--bad)}
  .eq{color:var(--good)}
  .footer{
    display:flex;align-items:center;justify-content:space-between;color:var(--muted);font-size:13px
  }
  .win{
    background:linear-gradient(90deg,#1f2b44,transparent);
    border:1px solid #2e3b59;color:#bff3cb;padding:8px 10px;border-radius:8px;
    font-weight:700;display:none
  }
  .win.show{display:block}
  .share{
    display:flex;gap:8px;align-items:center
  }
  .tiny{font-size:12px;color:var(--muted)}
  .sp{height:6px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="title">
      <h1>GaugeWord</h1>
      <span class="day" id="dayLabel">Daily</span>
    </div>
    <div class="legend">
      <span class="pill"><span class="arrow up">▲</span> you need higher</span>
      <span class="pill"><span class="arrow down">▼</span> you need lower</span>
      <span class="pill"><span class="arrow eq">●</span> matched</span>
    </div>
  </header>
  <main>
    <section class="panel">
      <div class="metrics-head">
        <span class="badge">Rules</span>
      </div>
      <div class="rules">
        <ul>
          <li>Guess any 4–7 letter English word. Press Enter or Guess.</li>
          <li>After each guess, five gauges compare your word to today’s secret:</li>
          <li style="list-style:none;margin-left:0">
            <div class="legend">
              <span class="pill"><b>Len</b> letters</span>
              <span class="pill"><b>Sum</b> A1–Z26 total</span>
              <span class="pill"><b>Vow</b> number of vowels (A,E,I,O,U)</span>
              <span class="pill"><b>Min</b> earliest letter in your word</span>
              <span class="pill"><b>Max</b> latest letter in your word</span>
            </div>
          </li>
          <li>Arrows show direction: ▲ need higher, ▼ need lower, ● exact match.</li>
          <li>Find the exact secret word to win. One new puzzle daily (UTC).</li>
        </ul>
      </div>
      <div class="sp"></div>
      <div class="metrics-head">
        <span class="badge">Make a guess</span>
      </div>
      <div class="inputRow">
        <input id="guessInput" type="text" placeholder="type a word..." autocomplete="off" maxlength="12" />
        <button id="guessBtn">Guess</button>
        <button id="giveUpBtn" class="secondary">Reveal</button>
      </div>
      <div class="msg" id="msg"></div>
      <div id="win" class="win"></div>
      <div class="sp"></div>
      <div class="metrics-head">
        <span class="badge">History</span>
        <span class="tiny">(values shown for your guesses; target stays hidden)</span>
      </div>
      <div class="board">
        <table>
          <thead>
            <tr>
              <th style="text-align:left;width:30%">Guess</th>
              <th>Len</th>
              <th>Sum</th>
              <th>Vow</th>
              <th>Min</th>
              <th>Max</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
      <div class="footer">
        <div class="share">
          <button id="copyBtn" class="secondary">Copy result</button>
          <span id="copied" class="tiny" style="display:none">Copied!</span>
        </div>
        <div class="tiny">Tip: non‑words are accepted, but real words help more.</div>
      </div>
    </section>
    <section class="panel">
      <div class="metrics-head"><span class="badge">Today</span></div>
      <div style="display:grid;grid-template-columns:1fr;gap:10px;font-size:14px;color:var(--muted)">
        <div><b>Date (UTC):</b> <span id="dateUTC"></span></div>
        <div><b>Puzzle #:</b> <span id="puzzleNo"></span></div>
        <div><b>Target length:</b> <span id="lenHint">—</span></div>
        <div class="tiny">Length is revealed so you can play compactly.</div>
      </div>
      <div class="sp"></div>
      <div class="metrics-head"><span class="badge">Legend</span></div>
      <div style="display:grid;gap:8px;color:var(--muted);font-size:14px">
        <div>• Len: If you see ▲, the secret word has more letters than your guess. ▼ means fewer letters.</div>
        <div>• Sum: Add A=1, B=2, …, Z=26 for each letter. ▲ means the secret’s total is higher.</div>
        <div>• Vow: Counts only A, E, I, O, U as vowels.</div>
        <div>• Min / Max: The earliest/latest letter in your word (alphabetically). ▲ means the secret’s letter is later in the alphabet; ▼ means earlier.</div>
      </div>
    </section>
  </main>
</div>

<script>
(function(){
  // Small curated list of target words (4–7 letters), deterministic by day (UTC)
  const targets = [
    "apple","bridge","chair","dance","eagle","forge","grain","honey","ivory","jelly","kneel","lemon","magic","night","ocean",
    "pearl","queen","river","sugar","tidal","unity","vivid","woven","xenon","young","zebra","amber","blush","cabin","daisy",
    "ember","fable","globe","harbor","inlet","jolly","karma","linen","meadow","novel","olive","piano","quilt","raven","sunny",
    "thick","umbra","vigor","waltz","yeast","azure","briar","cider","drape","flock","gazer","hinge","irony","joist","knead",
    "latch","mirth","nylon","ochre","prism","quark","riser","sleet","truce","udder","vowel","wafer","yodel","adore","banjo",
    "cello","delta","ether","frost","giddy","hatch","icing","jaunt","koala","lumen","mango","noble","opine","petal","quill",
    "reign","savor","trout","urban","valor","wharf","yacht","aspic","blaze","clang","droll","enact","femur","graft","humor",
    "ingot","jumpy","knack","lapel","mossy","nudge","ovoid","pithy","quirk","rouse","shard","table","ultra","vixen","wrath",
    "yearn","zesty","align","brisk","creed","dodge","elate","flint","grail","heist","idiom","joust","kiosk","lithe","mince",
    "nurse","overt","proud","rhyme","scout","thrum","unite","vapor","wryly","aider","bough","croak"
  ];

  // Utilities
  const A_CODE = 'a'.charCodeAt(0);
  const vowels = new Set(['a','e','i','o','u']);

  function sanitize(w){
    return (w||"").toLowerCase().replace(/[^a-z]/g,"");
  }
  function sumLetters(w){
    let s=0;
    for (let i=0;i<w.length;i++){
      s += (w.charCodeAt(i)-A_CODE+1);
    }
    return s;
  }
  function vowelCount(w){
    let c=0;
    for (let i=0;i<w.length;i++){
      if (vowels.has(w[i])) c++;
    }
    return c;
  }
  function minLetterVal(w){
    if (!w) return 0;
    let m=26;
    for (let i=0;i<w.length;i++){
      const v = w.charCodeAt(i)-A_CODE+1;
      if (v<m) m=v;
    }
    return m;
  }
  function maxLetterVal(w){
    if (!w) return 0;
    let m=1;
    for (let i=0;i<w.length;i++){
      const v = w.charCodeAt(i)-A_CODE+1;
      if (v>m) m=v;
    }
    return m;
  }
  function toLetter(n){
    return String.fromCharCode(A_CODE + (n-1));
  }

  // Deterministic "day" index (UTC)
  function dayNumberUTC(){
    const start = Date.UTC(2024,0,1);
    const now = new Date();
    const todayUTC = Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate());
    const diffDays = Math.floor((todayUTC - start)/86400000);
    return Math.max(0,diffDays);
  }

  const dayNo = dayNumberUTC();
  const target = targets[dayNo % targets.length];
  const targetMetrics = {
    len: target.length,
    sum: sumLetters(target),
    vow: vowelCount(target),
    min: minLetterVal(target),
    max: maxLetterVal(target)
  };

  // DOM
  const rowsEl = document.getElementById('rows');
  const inputEl = document.getElementById('guessInput');
  const guessBtn = document.getElementById('guessBtn');
  const giveUpBtn = document.getElementById('giveUpBtn');
  const msgEl = document.getElementById('msg');
  const winEl = document.getElementById('win');
  const dayLabel = document.getElementById('dayLabel');
  const dateUTCEl = document.getElementById('dateUTC');
  const puzzleNoEl = document.getElementById('puzzleNo');
  const lenHintEl = document.getElementById('lenHint');
  const copyBtn = document.getElementById('copyBtn');
  const copiedEl = document.getElementById('copied');

  // Populate header info
  const now = new Date();
  const isoDate = `${now.getUTCFullYear()}-${String(now.getUTCMonth()+1).padStart(2,'0')}-${String(now.getUTCDate()).padStart(2,'0')}`;
  dayLabel.textContent = `Daily • ${isoDate}`;
  dateUTCEl.textContent = isoDate + " (UTC)";
  puzzleNoEl.textContent = dayNo.toString();
  lenHintEl.textContent = target.length.toString();

  // State
  let finished = false;
  let history = []; // array of {word, m:{len,sum,vow,min,max}, arrows:{...}}

  // Storage key per day
  const storeKey = `gw_${isoDate}`;
  // Load previous (if any)
  try{
    const saved = JSON.parse(localStorage.getItem(storeKey) || "null");
    if (saved && saved.t===target && Array.isArray(saved.h)){
      history = saved.h;
      finished = !!saved.fin;
      renderAll();
      if (finished) onFinish(saved.winMsg||null);
    }
  }catch(e){/* ignore */}

  function save(){
    try{
      localStorage.setItem(storeKey, JSON.stringify({t:target, h:history, fin:finished, winMsg:winEl.textContent||""}));
    }catch(e){/* ignore */}
  }

  function compareArrow(a,b){
    if (a<b) return 'up';     // need higher
    if (a>b) return 'down';   // need lower
    return 'eq';              // matched
  }

  function renderRow(entry){
    const tr = document.createElement('tr');
    const tdGuess = document.createElement('td');
    tdGuess.className = 'guess';
    tdGuess.textContent = entry.word;
    tr.appendChild(tdGuess);

    const cols = ['len','sum','vow','min','max'];
    cols.forEach(k=>{
      const td = document.createElement('td');
      const wrap = document.createElement('div');
      wrap.className = 'cell';
      const arrow = document.createElement('div');
      arrow.className = 'arrow ' + entry.arrows[k];
      arrow.textContent = entry.arrows[k]==='up'?'▲':entry.arrows[k]==='down'?'▼':'●';
      const val = document.createElement('div');
      val.className = 'val';
      if (k==='min' || k==='max'){
        val.textContent = toLetter(entry.m[k]);
      }else{
        val.textContent = entry.m[k];
      }
      wrap.appendChild(arrow);
      wrap.appendChild(val);
      td.appendChild(wrap);
      tr.appendChild(td);
    });

    rowsEl.appendChild(tr);
  }

  function renderAll(){
    rowsEl.innerHTML = '';
    history.forEach(renderRow);
  }

  function feedbackFor(word){
    const m = {
      len: word.length,
      sum: sumLetters(word),
      vow: vowelCount(word),
      min: minLetterVal(word),
      max: maxLetterVal(word)
    };
    return {
      word,
      m,
      arrows: {
        len: compareArrow(m.len, targetMetrics.len),
        sum: compareArrow(m.sum, targetMetrics.sum),
        vow: compareArrow(m.vow, targetMetrics.vow),
        min: compareArrow(m.min, targetMetrics.min),
        max: compareArrow(m.max, targetMetrics.max)
      }
    };
  }

  function setMsg(text, ok=false){
    msgEl.textContent = text || '';
    msgEl.style.color = ok ? 'var(--good)' : 'var(--muted)';
  }

  function onFinish(customMsg){
    finished = true;
    inputEl.disabled = true;
    guessBtn.disabled = true;
    giveUpBtn.disabled = true;
    winEl.classList.add('show');
    if (!customMsg){
      winEl.textContent = `You found it in ${history.length} ${history.length===1?'guess':'guesses'}! The word was “${target.toUpperCase()}”.`;
    }else{
      winEl.textContent = customMsg;
    }
  }

  function submit(){
    if (finished) return;
    let w = sanitize(inputEl.value);
    if (!w){
      setMsg('Type 4–7 letters to guess.');
      return;
    }
    if (w.length < 4 || w.length > 7){
      setMsg('Word must be 4–7 letters.');
      return;
    }
    const entry = feedbackFor(w);
    history.push(entry);
    renderRow(entry);
    inputEl.value = '';
    setMsg('');
    if (w === target){
      onFinish();
    }
    save();
  }

  function reveal(){
    if (finished) return;
    onFinish(`Revealed. The word was “${target.toUpperCase()}”. Try again tomorrow!`);
    save();
  }

  function buildShare(){
    const header = `GaugeWord ${isoDate} • #${dayNo}`;
    const outcome = finished && history.length>0 && history[history.length-1].word===target
      ? `Solved in ${history.length}`
      : `Unsolved (${history.length})`;
    const rows = history.map(e=>{
      const cols = ['len','sum','vow','min','max'].map(k=>{
        const a = e.arrows[k];
        return a==='eq'?'●':(a==='up'?'▲':'▼');
      }).join('');
      return cols;
    });
    return `${header}\n${outcome}\n${rows.join('\n')}`;
  }

  // Events
  guessBtn.addEventListener('click', submit);
  giveUpBtn.addEventListener('click', reveal);
  inputEl.addEventListener('keydown', (e)=>{
    if (e.key === 'Enter') submit();
  });
  inputEl.addEventListener('input', ()=>{
    // live constraint: letters only
    const cur = inputEl.value;
    const cleaned = cur.replace(/[^a-zA-Z]/g,'');
    if (cur !== cleaned) inputEl.value = cleaned;
  });
  copyBtn.addEventListener('click', async ()=>{
    const text = buildShare();
    try{
      await navigator.clipboard.writeText(text);
      copiedEl.style.display = 'inline';
      setTimeout(()=>copiedEl.style.display='none', 1200);
    }catch(e){
      // fallback
      const ta = document.createElement('textarea');
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand('copy');
      document.body.removeChild(ta);
      copiedEl.style.display = 'inline';
      setTimeout(()=>copiedEl.style.display='none', 1200);
    }
  });

  // Autofocus
  setTimeout(()=>inputEl.focus(), 60);
})();
</script>
</body>
</html>