<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Clue Shards — Daily Word Game</title>
<style>
  :root{
    --bg:#0f1320;
    --panel:#151a2c;
    --card:#1a2040;
    --chip:#1f2856;
    --chip-sel:#2a3a8a;
    --text:#f2f5ff;
    --muted:#a9b2d6;
    --accent:#6fe3b4;
    --warn:#ffb86b;
    --bad:#ff7a7a;
    --good:#6fed6f;
  }
  html,body{
    height:100%;
    margin:0;
    background:linear-gradient(180deg,#0f1320 0%, #0f1320 60%, #121733 100%);
    color:var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  }
  .wrap{
    max-width: 1000px;
    margin: 0 auto;
    padding: 16px;
    display:flex;
    flex-direction:column;
    gap:16px;
    min-height:100vh;
    box-sizing:border-box;
  }
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }
  .title{
    font-weight:700;
    letter-spacing:0.5px;
    display:flex;
    align-items:baseline;
    gap:10px;
  }
  .title .brand{
    font-size:22px;
    color:var(--accent);
  }
  .title .sub{
    font-size:12px;
    color:var(--muted);
  }
  .bar{
    display:flex;
    gap:10px;
    align-items:center;
    color:var(--muted);
    font-size:12px;
  }
  details{
    background:var(--panel);
    border-radius:12px;
    padding:10px 12px;
  }
  details[open]{
    outline:1px solid rgba(255,255,255,0.08);
  }
  summary{
    cursor:pointer;
    user-select:none;
    font-weight:600;
    color:var(--text);
  }
  .rules{
    margin-top:8px;
    color:var(--muted);
    font-size:14px;
    line-height:1.4;
  }
  .game{
    display:grid;
    grid-template-columns: 1fr;
    gap:16px;
  }
  @media(min-width: 820px){
    .game{
      grid-template-columns: 1.15fr 0.85fr;
      align-items:start;
    }
  }
  .panel{
    background:var(--panel);
    border-radius:16px;
    padding:14px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
  }
  .section-title{
    font-weight:700;
    margin-bottom:10px;
    display:flex;
    align-items:center;
    justify-content:space-between;
  }
  .chips{
    display:grid;
    grid-template-columns: repeat(auto-fit,minmax(140px,1fr));
    gap:10px;
    margin:10px 0 8px;
  }
  .chip{
    background:var(--chip);
    border:1px solid rgba(255,255,255,0.08);
    padding:12px;
    border-radius:12px;
    cursor:pointer;
    user-select:none;
    min-height:48px;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    transition:transform .06s ease, background .12s ease, border-color .12s ease;
    font-size:14px;
    line-height:1.2;
  }
  .chip:active{
    transform:scale(0.98);
  }
  .chip.selected{
    background:var(--chip-sel);
    border-color:rgba(111,227,180,0.7);
    box-shadow:0 0 0 2px rgba(111,227,180,0.25) inset;
  }
  .btnrow{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
  }
  button, .ghost{
    background:var(--accent);
    color:#0a1220;
    border:none;
    padding:12px 14px;
    border-radius:12px;
    font-weight:700;
    cursor:pointer;
    min-width:120px;
    min-height:44px;
    transition:transform .06s ease, opacity .12s ease, background .12s ease;
  }
  button:disabled{
    opacity:0.55;
    cursor:not-allowed;
  }
  .ghost{
    background:transparent;
    color:var(--text);
    border:1px solid rgba(255,255,255,0.15);
    min-width:100px;
  }
  .info{
    color:var(--muted);
    font-size:13px;
  }
  .status{
    display:flex;
    gap:12px;
    align-items:center;
    flex-wrap:wrap;
    color:var(--muted);
    font-size:13px;
  }
  .badge{
    padding:4px 8px;
    border-radius:999px;
    background:#22305f;
    color:var(--text);
    font-weight:600;
    font-size:12px;
  }
  .hintbox{
    background:var(--card);
    border:1px solid rgba(255,255,255,0.08);
    border-radius:12px;
    padding:10px 12px;
    display:flex;
    flex-direction:column;
    gap:8px;
    font-size:14px;
    color:var(--muted);
  }
  .hintbox strong{ color:var(--text); }
  .inputrow{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
  }
  input[type="text"]{
    flex:1;
    background:#111633;
    color:var(--text);
    border:1px solid rgba(255,255,255,0.12);
    border-radius:12px;
    padding:12px 14px;
    min-height:44px;
    font-size:16px;
    outline:none;
  }
  input[type="text"]::placeholder{ color:#93a0cd; }
  .log{
    display:flex;
    flex-direction:column;
    gap:8px;
    max-height:36vh;
    overflow:auto;
    padding-right:2px;
  }
  .row{
    background:var(--card);
    border:1px solid rgba(255,255,255,0.08);
    border-radius:12px;
    padding:10px 12px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:8px;
  }
  .row .g{
    font-weight:700;
    letter-spacing:0.5px;
    color:var(--text);
  }
  .row .fb{
    display:flex;
    gap:8px;
    align-items:center;
    flex-wrap:wrap;
    font-size:12px;
    color:var(--muted);
  }
  .pill{
    border-radius:999px;
    padding:4px 8px;
    background:#253160;
    color:var(--text);
    font-weight:600;
  }
  .pill.good{ background:#1c4c34; }
  .pill.warn{ background:#5a3a14; }
  .pill.bad{ background:#5a1c1c; }
  .success{
    color:var(--good);
    font-weight:700;
  }
  .fail{
    color:var(--bad);
    font-weight:700;
  }
  footer{
    margin-top:auto;
    color:var(--muted);
    font-size:12px;
    text-align:center;
    padding:8px 0 2px;
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="title">
      <div class="brand">Clue Shards</div>
      <div class="sub" id="dailyLabel">Daily</div>
    </div>
    <div class="bar">
      <span class="badge" id="attemptsBadge">8 tries</span>
      <span id="orderStatus">Reorder the shards</span>
    </div>
  </header>

  <details>
    <summary>How to play</summary>
    <div class="rules">
      - Reassemble the shuffled clue by tapping two shards to swap them. The correct order forms a clear definition.<br>
      - Guess the secret word in up to 8 tries. Press Enter or tap Submit.<br>
      - Feedback shows how many letters are in the correct position and whether your guess comes alphabetically before or after the secret word.<br>
      - Extra hints unlock when you solve the shard order. Good luck!
    </div>
  </details>

  <div class="game">
    <section class="panel">
      <div class="section-title">
        <div>Clue Shards</div>
        <div class="info" id="pieceCount"></div>
      </div>
      <div class="chips" id="chips"></div>
      <div class="btnrow">
        <button id="checkBtn" aria-label="Check shard order">Check order</button>
        <button class="ghost" id="resetBtn" aria-label="Reset to today's shuffle">Reset order</button>
      </div>
      <div class="hintbox" id="cluePreview">
        <div><strong>Current order:</strong> <span id="previewText"></span></div>
        <div id="orderMsg" class="info"></div>
      </div>
    </section>

    <section class="panel">
      <div class="section-title">
        <div>Guess the Word</div>
      </div>
      <div class="hintbox" id="hintBox">
        <div><strong>Length:</strong> <span id="lenHint">—</span></div>
        <div><strong>Pattern:</strong> <span id="patHint">Solve the shards to unlock</span></div>
        <div><strong>Reveals:</strong> <span id="revHint">None yet</span></div>
      </div>
      <div class="inputrow" style="margin-top:10px;">
        <input type="text" id="guessInput" placeholder="Type your guess..." autocomplete="off" autocapitalize="none" spellcheck="false" />
        <button id="submitBtn">Submit</button>
      </div>
      <div class="status" style="margin-top:8px;">
        <div>Attempts left: <span class="badge" id="leftBadge">8</span></div>
        <div id="winLose"></div>
      </div>
      <div class="log" id="log" style="margin-top:10px;"></div>
    </section>
  </div>

  <footer>
    New puzzle every day. All gameplay is offline and deterministic.
  </footer>
</div>

<script>
(function(){
  // Data: 64 entries for daily rotation
  const ENTRIES = [
    {w:"thrifty", c:"Careful with money; unwilling to waste resources."},
    {w:"candid", c:"Honest and direct; without concealment."},
    {w:"placid", c:"Calm and peaceful; not easily upset or excited."},
    {w:"ornate", c:"Highly decorated or elaborate in style or detail."},
    {w:"jovial", c:"Cheerful and friendly; full of good humor."},
    {w:"meander", c:"To wander aimlessly or follow a winding course."},
    {w:"lucid", c:"Clear and easy to understand; transparent in thought."},
    {w:"sparse", c:"Thinly scattered or distributed; not dense or crowded."},
    {w:"zealous", c:"Filled with intense enthusiasm or devotion."},
    {w:"nudge", c:"To push gently to get attention or prompt action."},
    {w:"kindle", c:"To start a fire or to arouse emotion or interest."},
    {w:"deft", c:"Skillful and quick in movement, action, or thought."},
    {w:"heed", c:"To pay attention to; take notice of advice or warning."},
    {w:"ample", c:"More than enough in size, amount, or capacity."},
    {w:"quaint", c:"Attractively unusual or old-fashioned in character."},
    {w:"brisk", c:"Active, fast, and energetic; invigorating."},
    {w:"stoic", c:"Enduring pain or hardship without showing feelings."},
    {w:"fickle", c:"Changing frequently, especially in loyalty or interest."},
    {w:"nimble", c:"Quick and light in movement or action; agile."},
    {w:"banter", c:"Playful and friendly exchange of teasing remarks."},
    {w:"elated", c:"Extremely happy and excited; in high spirits."},
    {w:"ardent", c:"Passionate and enthusiastic; fervent in feeling."},
    {w:"dour", c:"Relentlessly severe, stern, or gloomy in manner."},
    {w:"wry", c:"Using or expressing dry, especially mocking, humor."},
    {w:"astute", c:"Having or showing sharp judgment; shrewd and clever."},
    {w:"frugal", c:"Sparing or economical with money and resources."},
    {w:"tedious", c:"Too long, slow, or dull; tiresome and monotonous."},
    {w:"cogent", c:"Clear, logical, and persuasive; convincing."},
    {w:"trifle", c:"Something of little value or importance; a small amount."},
    {w:"lavish", c:"Sumptuously rich or elaborate; to spend extravagantly."},
    {w:"dawdle", c:"To waste time by being slow or idle; loiter."},
    {w:"murky", c:"Dark, gloomy, or hard to see through; cloudy."},
    {w:"lilt", c:"A pleasant rising and falling of the voice or tune."},
    {w:"terse", c:"Sparing in the use of words; brief and to the point."},
    {w:"spry", c:"Active and lively, especially at an older age."},
    {w:"dreary", c:"Dull, bleak, and lifeless; depressingly boring."},
    {w:"ardor", c:"Enthusiasm or passion; intense desire."},
    {w:"remedy", c:"A treatment or solution for a problem or illness."},
    {w:"bolster", c:"To support, strengthen, or reinforce."},
    {w:"luster", c:"A gentle sheen or soft glow on a surface."},
    {w:"oblige", c:"To do as someone asks or requires; to help."},
    {w:"pristine", c:"In its original condition; unspoiled and clean."},
    {w:"staunch", c:"Loyal and committed; also to stop a flow."},
    {w:"quibble", c:"To argue or raise objections about trivial matters."},
    {w:"brim", c:"The top edge of a cup or container; to be full to it."},
    {w:"fervent", c:"Having or displaying passionate intensity."},
    {w:"coy", c:"Pretending to be shy or modest in a playful way."},
    {w:"solace", c:"Comfort or consolation in a time of distress."},
    {w:"glean", c:"To collect gradually; gather bit by bit."},
    {w:"soothe", c:"To calm or relieve pain, distress, or irritation."},
    {w:"steadfast", c:"Firmly loyal, reliable, and unchanging."},
    {w:"wary", c:"Feeling or showing caution about possible dangers."},
    {w:"robust", c:"Strong and healthy; sturdy and resilient."},
    {w:"pensive", c:"Engaged in deep or serious thought; reflective."},
    {w:"quench", c:"To satisfy thirst or extinguish a fire."},
    {w:"candidly", c:"In an honest, open, and straightforward way."},
    {w:"nimbleness", c:"The quality of being quick and light in movement."},
    {w:"jubilant", c:"Feeling or expressing great joy and triumph."},
    {w:"candidness", c:"The quality of being open and honest; frankness."},
    {w:"placate", c:"To make someone less angry or hostile; calm."},
    {w:"homage", c:"Special honor or respect shown publicly."},
    {w:"dauntless", c:"Showing fearlessness and determination."},
    {w:"frigid", c:"Very cold in temperature; lacking warmth."},
    {w:"verve", c:"Energy and enthusiasm in the expression of ideas."}
  ];

  // Utility: UTC day index for determinism
  function todayUTC(){
    const now = new Date();
    const y = now.getUTCFullYear();
    const m = now.getUTCMonth();
    const d = now.getUTCDate();
    return new Date(Date.UTC(y,m,d));
  }
  function dayOfYearUTC(date){
    const start = new Date(Date.UTC(date.getUTCFullYear(),0,1));
    const diff = (date - start) / 86400000;
    return Math.floor(diff)+1;
  }
  function seededShuffle(arr, seed){
    // simple LCG
    let a = 1664525, c = 1013904223;
    let m = 2**32;
    let state = (seed>>>0) || 123456789;
    const rnd = ()=> (state = (a*state + c) % m) / m;
    const copy = arr.slice();
    for(let i = copy.length-1; i>0; i--){
      const j = Math.floor(rnd() * (i+1));
      [copy[i], copy[j]] = [copy[j], copy[i]];
    }
    return copy;
  }
  function chunkWords(clue, parts){
    const tokens = clue.trim().split(/\s+/);
    const n = tokens.length;
    parts = Math.min(parts, n);
    const base = Math.floor(n/parts);
    let extra = n % parts;
    const res = [];
    let idx = 0;
    for(let p=0; p<parts; p++){
      const take = base + (extra>0 ? 1 : 0);
      extra = Math.max(0, extra-1);
      res.push(tokens.slice(idx, idx+take).join(' '));
      idx += take;
    }
    return res;
  }
  function vowelConsonantPattern(word){
    const v = new Set(['a','e','i','o','u','y']);
    return word.toLowerCase().split('').map(ch => v.has(ch) ? 'V':'C').join('');
  }
  function setText(id, t){ document.getElementById(id).textContent = t; }
  function el(id){ return document.getElementById(id); }

  // Pick today's entry
  const t = todayUTC();
  const doy = dayOfYearUTC(t);
  const year = t.getUTCFullYear();
  const dailyIndex = (year * 1000 + doy) % ENTRIES.length;
  const entry = ENTRIES[dailyIndex];
  const secret = entry.w.toLowerCase();
  const clue = entry.c.trim();

  // Build shards
  const desiredParts = Math.min(7, Math.max(4, Math.ceil(clue.split(/\s+/).length / 3))); // 4..7 parts
  const shardsCorrect = chunkWords(clue, desiredParts);
  // scramble deterministically; ensure not equal to correct
  let shardsScrambled = seededShuffle(shardsCorrect, (doy * 2654435761) ^ year);
  if (shardsScrambled.every((s,i)=> s===shardsCorrect[i]) && shardsScrambled.length>1){
    // force a swap
    [shardsScrambled[0], shardsScrambled[1]] = [shardsScrambled[1], shardsScrambled[0]];
  }

  // State
  let orderSolved = false;
  let selectedIndex = null;
  let attempts = 8;
  let used = 0;
  let finished = false;
  let firstReveal = false;
  let lastReveal = false;

  // Populate UI
  setText('dailyLabel', `Daily #${year}-${String(doy).padStart(3,'0')}`);
  setText('pieceCount', `${shardsScrambled.length} pieces`);
  setText('attemptsBadge', `${attempts} tries`);
  setText('leftBadge', attempts.toString());

  const chipsWrap = el('chips');

  function renderChips(){
    chipsWrap.innerHTML = '';
    shardsScrambled.forEach((text, idx)=>{
      const div = document.createElement('div');
      div.className = 'chip';
      div.textContent = text;
      div.tabIndex = 0;
      div.setAttribute('role','button');
      div.setAttribute('aria-label', `Shard ${idx+1}: ${text}`);
      div.addEventListener('click', ()=> onChipClick(idx, div));
      div.addEventListener('keydown', (e)=> { if(e.key==='Enter' || e.key===' '){ e.preventDefault(); onChipClick(idx, div); }});
      chipsWrap.appendChild(div);
    });
    updatePreview();
  }

  function onChipClick(idx, div){
    if (finished) return;
    const chips = [...document.querySelectorAll('.chip')];
    if(selectedIndex===null){
      selectedIndex = idx;
      div.classList.add('selected');
    }else if(selectedIndex === idx){
      selectedIndex = null;
      div.classList.remove('selected');
    }else{
      // swap shards
      [shardsScrambled[selectedIndex], shardsScrambled[idx]] = [shardsScrambled[idx], shardsScrambled[selectedIndex]];
      // clear UI selection
      chips[selectedIndex].classList.remove('selected');
      selectedIndex = null;
      renderChips();
    }
  }

  function updatePreview(){
    const prev = shardsScrambled.join(' ');
    setText('previewText', '“ ' + prev + ' ”');
    setText('orderStatus', orderSolved ? 'Clue solved' : 'Reorder the shards');
  }

  function checkOrder(){
    const ok = shardsScrambled.length === shardsCorrect.length &&
               shardsScrambled.every((s,i)=> s===shardsCorrect[i]);
    const msgEl = el('orderMsg');
    if(ok){
      orderSolved = true;
      msgEl.innerHTML = 'Definition unlocked! You now have extra hints.';
      msgEl.style.color = 'var(--accent)';
      // Unlock hints
      setText('patHint', vowelConsonantPattern(secret));
      setText('lenHint', `${secret.length} letters`);
    }else{
      msgEl.innerHTML = 'Not quite. Try swapping more shards.';
      msgEl.style.color = 'var(--muted)';
    }
    updatePreview();
  }

  el('checkBtn').addEventListener('click', checkOrder);
  el('resetBtn').addEventListener('click', ()=>{
    shardsScrambled = seededShuffle(shardsCorrect, (doy * 2654435761) ^ year);
    if (shardsScrambled.every((s,i)=> s===shardsCorrect[i]) && shardsScrambled.length>1){
      [shardsScrambled[0], shardsScrambled[1]] = [shardsScrambled[1], shardsScrambled[0]];
    }
    selectedIndex = null;
    renderChips();
    setText('orderMsg','');
  });

  // Guessing
  const input = el('guessInput');
  const submit = el('submitBtn');
  const log = el('log');
  const winLose = el('winLose');
  setText('lenHint', `${secret.length} letters`);

  function compareGuess(g){
    const guess = g.toLowerCase().trim();
    const res = {
      exact: guess === secret,
      inPlace: 0,
      lenMatch: guess.length === secret.length,
      alpha: 0 // -1 before, 1 after, 0 equal
    };
    const L = Math.min(guess.length, secret.length);
    for(let i=0;i<L;i++){
      if(guess[i]===secret[i]) res.inPlace++;
    }
    res.alpha = guess.localeCompare(secret);
    return res;
  }

  function addLog(guess, fb){
    const row = document.createElement('div');
    row.className = 'row';
    const left = document.createElement('div');
    left.className = 'g';
    left.textContent = guess;
    const right = document.createElement('div');
    right.className = 'fb';
    const p1 = document.createElement('div');
    p1.className = 'pill';
    p1.textContent = `${fb.inPlace} in place`;
    right.appendChild(p1);

    const p2 = document.createElement('div');
    p2.className = 'pill ' + (fb.lenMatch ? 'good' : 'warn');
    p2.textContent = fb.lenMatch ? 'length ok' : `needs ${secret.length}`;
    right.appendChild(p2);

    if(fb.alpha !== 0){
      const p3 = document.createElement('div');
      p3.className = 'pill';
      p3.textContent = fb.alpha < 0 ? 'before alphabetically' : 'after alphabetically';
      right.appendChild(p3);
    }

    row.appendChild(left);
    row.appendChild(right);
    log.prepend(row);
  }

  function updateReveals(){
    const revEl = el('revHint');
    const bits = [];
    if(firstReveal) bits.push(`Starts with “${secret[0].toUpperCase()}”`);
    if(lastReveal) bits.push(`Ends with “${secret[secret.length-1].toUpperCase()}”`);
    if(bits.length===0) {
      revEl.textContent = 'None yet';
    } else {
      revEl.textContent = bits.join(' • ');
    }
  }

  function finish(win){
    finished = true;
    submit.disabled = true;
    input.disabled = true;
    el('checkBtn').disabled = true;
    el('resetBtn').disabled = true;
    if(win){
      winLose.innerHTML = `<span class="success">You solved it! The word is “${secret.toUpperCase()}”.</span>`;
    }else{
      winLose.innerHTML = `<span class="fail">Out of tries. The word was “${secret.toUpperCase()}”.</span>`;
    }
  }

  function onSubmit(){
    if(finished) return;
    const guess = input.value.trim();
    if(!guess){
      input.focus();
      return;
    }
    used++;
    attempts--;
    const fb = compareGuess(guess);
    addLog(guess, fb);
    setText('leftBadge', attempts.toString());

    if(orderSolved){
      if(used >= 3 && !firstReveal){ firstReveal = true; updateReveals(); }
      if(used >= 5 && !lastReveal){ lastReveal = true; updateReveals(); }
    }

    if(fb.exact){
      finish(true);
      return;
    }
    if(attempts<=0){
      finish(false);
      return;
    }
    input.value = '';
    input.focus();
  }

  submit.addEventListener('click', onSubmit);
  input.addEventListener('keydown', (e)=>{ if(e.key === 'Enter'){ onSubmit(); }});

  // Initial render
  renderChips();
  updateReveals();
})();
</script>
</body>
</html>